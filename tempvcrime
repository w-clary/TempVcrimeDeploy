<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denver Temperature-Crime Visualization</title>
    
    <!-- Highcharts CDN -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/sonification.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #000000; /* Black background */
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        #chartContainer {
            width: 100%;
            height: 600px;
            margin: 20px 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(255,255,255,0.1); /* Light shadow for dark background */
        }
        h1 {
            text-align: center;
            color: #ffffff; /* White text */
            margin-bottom: 10px;
        }
        .description {
            text-align: center;
            color: #cccccc; /* Light gray for subtitle */
            margin-bottom: 20px;
            font-style: italic;
        }
        .controls {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        .control-row {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 15px;
            flex-wrap: wrap; /* Allow wrapping on small screens */
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #000000;
            color: #ffffff;
            transition: background-color 0.3s;
        }
        button:hover:not(:disabled) {
            background-color: #333333;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        input[type="range"] {
            width: 200px;
        }
        .slider-label {
            min-width: 50px;
            text-align: right;
        }
        .info-box {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            border: 1px solid #ddd;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 40px;
            height: 20px;
            border-radius: 3px;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
            display: none;
        }
        .status.error {
            background: #ffebee;
        }
        .playback-info {
            background-color: #fff3e0;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 14px;
        }
        .loading-message {
            text-align: center;
            padding: 20px;
            font-size: 18px;
            color: #cccccc; /* Light gray for loading message on black background */
        }
        /* Hidden elements - kept for potential reversion */
        .test-mode-info {
            display: none;
        }
        .version-info {
            display: none;
        }
        
        /* Mobile responsive styles */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            h1 {
                font-size: 1.5em;
            }
            .description {
                font-size: 0.9em;
            }
            .controls {
                padding: 15px;
            }
            .control-row {
                gap: 10px;
            }
            button {
                padding: 8px 15px;
                font-size: 14px;
                flex: 1;
                min-width: 60px;
            }
            input[type="range"] {
                width: 150px;
            }
            .info-box {
                font-size: 14px;
                padding: 12px;
            }
            #multitrack-detail {
                font-size: 12px !important;
            }
            .legend {
                flex-direction: column;
                gap: 10px;
            }
            #chartContainer {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Denver Temperature-Crime Correlation Analysis</h1>
        <p class="description" id="dataDescription">
            <span class="loading-message">Loading data...</span>
        </p>
        
        <div class="status" id="status"></div>
        
        <div class="controls" id="sonification-controls" style="display: none;">
            <h3>Sonification Controls</h3>
            
            <div class="version-info">
                <strong>Version 2.2:</strong> Final version - smooth temperature + distinct horror arpeggios
            </div>
            
            <!-- Track options dropdown -->
            <div class="control-row">
                <label>Track Options:</label>
                <select id="crime-mode" onchange="updateCrimeMode()">
                    <option value="temp-only">Temperature</option>
                    <option value="crime-only">Violent Crime</option>
                    <option value="both" selected>Temperature + Violent Crime</option>
                </select>
            </div>
            
            <div class="test-mode-info" id="test-mode-info">
                Crime sonification enabled: Multi-track plucked notes based on crime intensity.
            </div>
            
            <div class="control-row">
                <button id="play-btn" onclick="playChart()">▶ Play</button>
                <button id="pause-btn" onclick="pauseChart()" disabled>⏸ Pause</button>
                <button id="stop-btn" onclick="stopChart()" disabled>⏹ Stop</button>
                <button id="reset-btn" onclick="resetChart()">↺ Reset</button>
            </div>
            
            <div class="control-row">
                <label>Duration (seconds):</label>
                <input type="range" id="duration-slider" min="300" max="600" step="10" value="450" onchange="updateDuration()">
                <span class="slider-label" id="duration-display">450s</span>
            </div>
            
            <div class="control-row">
                <label>Volume:</label>
                <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.7" onchange="updateVolume()">
                <span class="slider-label" id="volume-display">70%</span>
            </div>
            
            <div class="playback-info" id="playback-info">
                <strong>Playback Info:</strong> <span id="playback-details">Ready to play</span>
            </div>
            
            <div class="info-box">
                <strong>Audio Mapping:</strong><br>
                <span id="mapping-description">
                • Temperature → Continuous tone (left speaker): Low frequency = cold, High frequency = hot<br>
                • Crime → Multiple staccato notes (right speaker): More notes = higher violent crime count
                </span>
                <div id="multitrack-detail" style="margin-top: 10px; font-size: 13px; color: #666;">
                    <strong>Violent Crime Track Details:</strong><br>
                    • Low crime (0-25%): Single note (G4)<br>
                    • Medium-low (25-50%): Two-note interval (C5, E5) - 150ms gap<br>
                    • Medium-high (50-75%): Three-note chord (G5, B5, D6) - 175ms gap<br>
                    • High crime (75-100%): Four-note chord (G5, C6, Eb6, G6) - 200ms gap<br>
                    • Gap duration increases with crime level for clarity
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(to right, #0066FF, #3380FF, #66AAFF, #99CCFF, #FFFACD, #FFE4B5, #FFB6C1, #FF8888, #FF6666, #FF0000);"></div>
                    <span>Temperature (°F)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(100, 100, 100, 0.6);"></div>
                    <span>Violent Crime Count (Daily)</span>
                </div>
            </div>
        </div>
        
        <div id="chartContainer"></div>
    </div>
    
    <script>
        // Embedded CSV data
        const embeddedCSV = `date,max_temp_f,crime_count

        2020-01-01,51.08,15
        2020-01-02,44.06,9
        2020-01-03,48.02,16
        2020-01-04,62.06,14
        2020-01-05,69.08,17
        2020-01-06,68,11
        2020-01-07,57.02,14
        2020-01-08,55.04,12
        2020-01-09,55.04,10
        2020-01-10,57.02,9
        2020-01-11,48.02,4
        2020-01-12,59,11
        2020-01-13,48.02,15
        2020-01-14,44.06,21
        2020-01-15,51.08,6
        2020-01-16,57.02,12
        2020-01-17,62.06,8
        2020-01-18,68,8
        2020-01-19,71.06,17
        2020-01-20,59,18
        2020-01-21,41,17
        2020-01-22,51.08,15
        2020-01-23,55.04,13
        2020-01-24,60.08,14
        2020-01-25,60.08,15
        2020-01-26,60.08,8
        2020-01-27,60.08,11
        2020-01-28,62.06,14
        2020-01-29,60.08,11
        2020-01-30,62.06,15
        2020-01-31,64.04,14
        2020-02-01,59,13
        2020-02-02,50,6
        2020-02-03,51.08,8
        2020-02-04,48.02,8
        2020-02-05,42.08,14
        2020-02-06,39.02,13
        2020-02-07,51.08,9
        2020-02-08,48.02,2
        2020-02-09,48.02,11
        2020-02-10,41,13
        2020-02-11,39.02,14
        2020-02-12,44.06,17
        2020-02-13,44.06,14
        2020-02-14,46.04,5
        2020-02-15,42.08,7
        2020-02-16,44.06,6
        2020-02-17,42.08,11
        2020-02-18,42.08,6
        2020-02-19,39.02,12
        2020-02-20,42.08,15
        2020-02-21,46.04,10
        2020-02-22,50,9
        2020-02-23,37.04,11
        2020-02-24,35.06,14
        2020-02-25,35.06,6
        2020-02-26,46.04,14
        2020-02-27,48.02,9
        2020-02-28,48.02,19
        2020-02-29,42.08,12
        2020-03-01,46.04,7
        2020-03-02,50,10
        2020-03-03,53.06,21
        2020-03-04,60.08,23
        2020-03-05,62.06,11
        2020-03-06,62.06,8
        2020-03-07,62.06,8
        2020-03-08,62.06,13
        2020-03-09,69.08,14
        2020-03-10,64.04,9
        2020-03-11,41,11
        2020-03-12,44.06,9
        2020-03-13,51.08,6
        2020-03-14,60.08,9
        2020-03-15,66.02,5
        2020-03-16,69.08,6
        2020-03-17,57.02,11
        2020-03-18,37.04,14
        2020-03-19,51.08,15
        2020-03-20,59,11
        2020-03-21,62.06,7
        2020-03-22,57.02,8
        2020-03-23,24.08,8
        2020-03-24,37.04,14
        2020-03-25,64.04,9
        2020-03-26,69.08,15
        2020-03-27,73.04,21
        2020-03-28,78.08,7
        2020-03-29,77,13
        2020-03-30,75.02,11
        2020-03-31,62.06,17
        2020-04-01,69.08,13
        2020-04-02,69.08,9
        2020-04-03,50,8
        2020-04-04,50,7
        2020-04-05,62.06,8
        2020-04-06,68,7
        2020-04-07,26.06,11
        2020-04-08,33.08,8
        2020-04-09,42.08,12
        2020-04-10,55.04,6
        2020-04-11,62.06,5
        2020-04-12,55.04,7
        2020-04-13,35.06,9
        2020-04-14,26.06,1
        2020-04-15,51.08,6
        2020-04-16,60.08,10
        2020-04-17,64.04,8
        2020-04-18,60.08,7
        2020-04-19,53.06,5
        2020-04-20,60.08,7
        2020-04-21,69.08,6
        2020-04-22,73.04,3
        2020-04-23,77,7
        2020-04-24,78.08,11
        2020-04-25,77,14
        2020-04-26,78.08,13
        2020-04-27,66.02,15
        2020-04-28,77,18
        2020-04-29,75.02,11
        2020-04-30,73.04,6
        2020-05-01,77,13
        2020-05-02,80.06,15
        2020-05-03,77,17
        2020-05-04,68,11
        2020-05-05,68,15
        2020-05-06,80.06,20
        2020-05-07,64.04,10
        2020-05-08,44.06,10
        2020-05-09,48.02,15
        2020-05-10,57.02,8
        2020-05-11,44.06,15
        2020-05-12,55.04,15
        2020-05-13,68,9
        2020-05-14,73.04,17
        2020-05-15,73.04,16
        2020-05-16,71.06,13
        2020-05-17,71.06,16
        2020-05-18,71.06,13
        2020-05-19,60.08,13
        2020-05-20,68,17
        2020-05-21,68,20
        2020-05-22,75.02,9
        2020-05-23,75.02,9
        2020-05-24,73.04,21
        2020-05-25,84.02,13
        2020-05-26,86,15
        2020-05-27,86,10
        2020-05-28,86,10
        2020-05-29,82.04,8
        2020-05-30,73.04,15
        2020-05-31,68,12
        2020-06-01,77,9
        2020-06-02,77,10
        2020-06-03,78.08,15
        2020-06-04,82.04,16
        2020-06-05,84.02,17
        2020-06-06,86,14
        2020-06-07,87.08,12
        2020-06-08,87.08,13
        2020-06-09,78.08,12
        2020-06-10,71.06,10
        2020-06-11,80.06,12
        2020-06-12,84.02,8
        2020-06-13,73.04,9
        2020-06-14,80.06,11
        2020-06-15,78.08,9
        2020-06-16,78.08,20
        2020-06-17,73.04,12
        2020-06-18,75.02,12
        2020-06-19,80.06,15
        2020-06-20,84.02,7
        2020-06-21,89.06,6
        2020-06-22,87.08,12
        2020-06-23,89.06,9
        2020-06-24,91.04,8
        2020-06-25,93.02,12
        2020-06-26,95,13
        2020-06-27,96.08,10
        2020-06-28,95,18
        2020-06-29,89.06,14
        2020-06-30,86,18
        2020-07-01,80.06,13
        2020-07-02,84.02,11
        2020-07-03,82.04,8
        2020-07-04,89.06,34
        2020-07-05,89.06,9
        2020-07-06,91.04,15
        2020-07-07,84.02,11
        2020-07-08,93.02,14
        2020-07-09,98.06,12
        2020-07-10,98.06,13
        2020-07-11,96.08,20
        2020-07-12,98.06,17
        2020-07-13,98.06,17
        2020-07-14,95,19
        2020-07-15,86,15
        2020-07-16,89.06,11
        2020-07-17,91.04,13
        2020-07-18,87.08,20
        2020-07-19,89.06,21
        2020-07-20,93.02,33
        2020-07-21,87.08,15
        2020-07-22,82.04,15
        2020-07-23,87.08,11
        2020-07-24,89.06,21
        2020-07-25,91.04,21
        2020-07-26,93.02,17
        2020-07-27,93.02,20
        2020-07-28,86,15
        2020-07-29,86,13
        2020-07-30,78.08,15
        2020-07-31,91.04,10
        2020-08-01,93.02,22
        2020-08-02,96.08,12
        2020-08-03,95,17
        2020-08-04,89.06,18
        2020-08-05,89.06,24
        2020-08-06,89.06,22
        2020-08-07,96.08,21
        2020-08-08,100.04,19
        2020-08-09,93.02,13
        2020-08-10,91.04,22
        2020-08-11,91.04,14
        2020-08-12,96.08,17
        2020-08-13,100.04,17
        2020-08-14,98.06,18
        2020-08-15,100.04,11
        2020-08-16,98.06,16
        2020-08-17,95,35
        2020-08-18,87.08,15
        2020-08-19,86,17
        2020-08-20,84.02,15
        2020-08-21,78.08,16
        2020-08-22,82.04,11
        2020-08-23,96.98,31
        2020-08-24,89.06,18
        2020-08-25,89.06,17
        2020-08-26,91.04,14
        2020-08-27,86,13
        2020-08-28,93.02,13
        2020-08-29,96.08,13
        2020-08-30,93.02,16
        2020-08-31,87.08,17
        2020-09-01,84.02,10
        2020-09-02,89.06,17
        2020-09-03,93.02,13
        2020-09-04,93.02,13
        2020-09-05,95,21
        2020-09-06,93.02,14
        2020-09-07,64.04,10
        2020-09-08,33.08,10
        2020-09-09,44.06,10
        2020-09-10,75.02,16
        2020-09-11,84.02,14
        2020-09-12,91.04,12
        2020-09-13,82.04,13
        2020-09-14,78.08,12
        2020-09-15,82.04,8
        2020-09-16,75.02,8
        2020-09-17,64.04,13
        2020-09-18,77,10
        2020-09-19,84.02,12
        2020-09-20,84.02,17
        2020-09-21,82.04,9
        2020-09-22,75.02,10
        2020-09-23,78.08,9
        2020-09-24,73.04,12
        2020-09-25,75.02,17
        2020-09-26,86,15
        2020-09-27,89.06,14
        2020-09-28,87.08,8
        2020-09-29,78.08,13
        2020-09-30,84.02,9
        2020-10-01,84.02,13
        2020-10-02,78.08,16
        2020-10-03,73.04,18
        2020-10-04,78.08,13
        2020-10-05,77,15
        2020-10-06,80.06,14
        2020-10-07,80.06,10
        2020-10-08,84.02,16
        2020-10-09,87.08,12
        2020-10-10,89.06,14
        2020-10-11,86,8
        2020-10-12,86,15
        2020-10-13,89.06,13
        2020-10-14,80.06,8
        2020-10-15,71.06,15
        2020-10-16,73.04,12
        2020-10-17,73.04,12
        2020-10-18,73.04,14
        2020-10-19,71.06,15
        2020-10-20,62.06,13
        2020-10-21,66.02,10
        2020-10-22,69.08,9
        2020-10-23,71.06,13
        2020-10-24,42.08,7
        2020-10-25,51.08,8
        2020-10-26,15.08,9
        2020-10-27,37.04,18
        2020-10-28,48.02,12
        2020-10-29,55.04,17
        2020-10-30,55.04,9
        2020-10-31,62.06,6
        2020-11-01,66.02,10
        2020-11-02,60.08,10
        2020-11-03,60.08,9
        2020-11-04,68,17
        2020-11-05,69.08,13
        2020-11-06,73.04,13
        2020-11-07,78.08,12
        2020-11-08,77,15
        2020-11-09,68,10
        2020-11-10,68,15
        2020-11-11,71.06,11
        2020-11-12,62.06,10
        2020-11-13,64.04,14
        2020-11-14,73.04,15
        2020-11-15,73.04,10
        2020-11-16,64.04,13
        2020-11-17,64.04,10
        2020-11-18,68,15
        2020-11-19,71.06,12
        2020-11-20,71.06,13
        2020-11-21,73.04,14
        2020-11-22,64.04,9
        2020-11-23,55.04,7
        2020-11-24,51.08,13
        2020-11-25,60.08,12
        2020-11-26,60.08,9
        2020-11-27,64.04,8
        2020-11-28,64.04,7
        2020-11-29,66.02,9
        2020-11-30,69.08,11
        2020-12-01,60.08,9
        2020-12-02,64.04,11
        2020-12-03,66.02,11
        2020-12-04,68,9
        2020-12-05,59,8
        2020-12-06,64.04,12
        2020-12-07,64.04,8
        2020-12-08,48.02,10
        2020-12-09,51.08,8
        2020-12-10,51.08,13
        2020-12-11,55.04,8
        2020-12-12,62.06,8
        2020-12-13,64.04,9
        2020-12-14,41,9
        2020-12-15,37.04,8
        2020-12-16,35.06,10
        2020-12-17,39.02,11
        2020-12-18,46.04,5
        2020-12-19,48.02,4
        2020-12-20,50,9
        2020-12-21,51.08,13
        2020-12-22,50,5
        2020-12-23,46.04,9
        2020-12-24,48.02,12
        2020-12-25,55.04,6
        2020-12-26,60.08,16
        2020-12-27,62.06,16
        2020-12-28,60.08,7
        2020-12-29,57.02,10
        2020-12-30,42.08,10
        2020-12-31,37.04,10
        2021-01-01,35.06,10
        2021-01-02,37.04,5
        2021-01-03,35.06,10
        2021-01-04,35.06,7
        2021-01-05,41,11
        2021-01-06,44.06,13
        2021-01-07,48.02,14
        2021-01-08,50,12
        2021-01-09,50,16
        2021-01-10,50,7
        2021-01-11,51.08,5
        2021-01-12,41,11
        2021-01-13,37.04,9
        2021-01-14,39.02,13
        2021-01-15,44.06,7
        2021-01-16,44.06,4
        2021-01-17,51.08,11
        2021-01-18,44.06,12
        2021-01-19,48.02,10
        2021-01-20,50,13
        2021-01-21,51.08,9
        2021-01-22,53.06,17
        2021-01-23,51.08,15
        2021-01-24,46.04,8
        2021-01-25,39.02,8
        2021-01-26,39.02,4
        2021-01-27,42.08,11
        2021-01-28,48.02,10
        2021-01-29,50,13
        2021-01-30,50,11
        2021-01-31,48.02,11
        2021-02-01,50,15
        2021-02-02,55.04,8
        2021-02-03,55.04,6
        2021-02-04,50,11
        2021-02-05,42.08,8
        2021-02-06,46.04,8
        2021-02-07,50,8
        2021-02-08,50,12
        2021-02-09,48.02,8
        2021-02-10,35.06,8
        2021-02-11,32,9
        2021-02-12,28.04,7
        2021-02-13,24.08,3
        2021-02-14,30.02,5
        2021-02-15,21.02,8
        2021-02-16,33.08,10
        2021-02-17,46.04,6
        2021-02-18,51.08,15
        2021-02-19,53.06,16
        2021-02-20,57.02,17
        2021-02-21,57.02,17
        2021-02-22,60.08,21
        2021-02-23,62.06,17
        2021-02-24,66.02,15
        2021-02-25,66.02,12
        2021-02-26,66.02,16
        2021-02-27,64.04,10
        2021-02-28,66.02,9
        2021-03-01,60.08,12
        2021-03-02,51.08,10
        2021-03-03,48.02,12
        2021-03-04,48.02,7
        2021-03-05,48.02,6
        2021-03-06,51.08,12
        2021-03-07,60.08,16
        2021-03-08,62.06,14
        2021-03-09,66.02,9
        2021-03-10,69.08,15
        2021-03-11,69.08,17
        2021-03-12,68,18
        2021-03-13,35.06,9
        2021-03-14,23,6
        2021-03-15,32,14
        2021-03-16,42.08,17
        2021-03-17,51.08,12
        2021-03-18,55.04,15
        2021-03-19,60.08,12
        2021-03-20,66.02,12
        2021-03-21,66.02,13
        2021-03-22,68,11
        2021-03-23,69.08,21
        2021-03-24,69.08,18
        2021-03-25,71.06,17
        2021-03-26,73.04,16
        2021-03-27,75.02,16
        2021-03-28,73.04,6
        2021-03-29,66.02,14
        2021-03-30,55.04,10
        2021-03-31,60.08,13
        2021-04-01,64.04,9
        2021-04-02,64.04,16
        2021-04-03,64.04,11
        2021-04-04,64.04,11
        2021-04-05,71.06,10
        2021-04-06,75.02,13
        2021-04-07,77,14
        2021-04-08,77,8
        2021-04-09,75.02,14
        2021-04-10,73.04,14
        2021-04-11,75.02,13
        2021-04-12,71.06,10
        2021-04-13,62.06,13
        2021-04-14,55.04,6
        2021-04-15,60.08,10
        2021-04-16,60.08,12
        2021-04-17,64.04,12
        2021-04-18,66.02,12
        2021-04-19,60.08,22
        2021-04-20,39.02,11
        2021-04-21,48.02,14
        2021-04-22,57.02,18
        2021-04-23,51.08,13
        2021-04-24,66.02,13
        2021-04-25,73.04,15
        2021-04-26,75.02,13
        2021-04-27,75.02,11
        2021-04-28,77,17
        2021-04-29,66.02,15
        2021-04-30,60.08,13
        2021-05-01,59,7
        2021-05-02,60.08,12
        2021-05-03,71.06,15
        2021-05-04,77,18
        2021-05-05,78.08,16
        2021-05-06,77,13
        2021-05-07,68,13
        2021-05-08,66.02,8
        2021-05-09,46.04,31
        2021-05-10,71.06,16
        2021-05-11,55.04,9
        2021-05-12,66.02,13
        2021-05-13,73.04,13
        2021-05-14,73.04,21
        2021-05-15,78.08,9
        2021-05-16,77,16
        2021-05-17,78.08,16
        2021-05-18,78.08,15
        2021-05-19,71.06,14
        2021-05-20,71.06,16
        2021-05-21,60.08,13
        2021-05-22,60.08,18
        2021-05-23,66.02,17
        2021-05-24,71.06,12
        2021-05-25,77,15
        2021-05-26,78.08,19
        2021-05-27,80.06,13
        2021-05-28,82.04,18
        2021-05-29,69.98,31
        2021-05-30,86,17
        2021-05-31,80.06,12
        2021-06-01,84.02,17
        2021-06-02,82.04,13
        2021-06-03,80.06,10
        2021-06-04,68,10
        2021-06-05,69.08,15
        2021-06-06,86,31
        2021-06-07,73.04,9
        2021-06-08,75.02,14
        2021-06-09,75.02,15
        2021-06-10,77,13
        2021-06-11,82.04,18
        2021-06-12,84.02,13
        2021-06-13,86,17
        2021-06-14,93.02,10
        2021-06-15,102.02,17
        2021-06-16,102.02,21
        2021-06-17,98.06,20
        2021-06-18,78.08,17
        2021-06-19,80.06,11
        2021-06-20,84.02,11
        2021-06-21,80.06,11
        2021-06-22,86,16
        2021-06-23,86,12
        2021-06-24,84.02,9
        2021-06-25,93.02,15
        2021-06-26,78.08,14
        2021-06-27,84.02,10
        2021-06-28,91.04,17
        2021-06-29,86,13
        2021-06-30,91.04,17
        2021-07-01,89.06,15
        2021-07-02,86,9
        2021-07-03,89.06,10
        2021-07-04,89.06,5
        2021-07-05,87.08,32
        2021-07-06,82.04,12
        2021-07-07,89.06,16
        2021-07-08,89.06,18
        2021-07-09,91.04,15
        2021-07-10,93.02,21
        2021-07-11,89.06,17
        2021-07-12,82.04,13
        2021-07-13,77,13
        2021-07-14,69.08,7
        2021-07-15,73.04,10
        2021-07-16,82.04,14
        2021-07-17,82.04,13
        2021-07-18,87.08,12
        2021-07-19,87.08,16
        2021-07-20,86,18
        2021-07-21,91.04,17
        2021-07-22,87.08,14
        2021-07-23,89.06,13
        2021-07-24,89.06,13
        2021-07-25,91.04,21
        2021-07-26,91.04,17
        2021-07-27,86,21
        2021-07-28,82.04,13
        2021-07-29,84.02,16
        2021-07-30,84.02,18
        2021-07-31,77,13
        2021-08-01,77,21
        2021-08-02,75.02,13
        2021-08-03,78.08,14
        2021-08-04,82.04,17
        2021-08-05,87.08,10
        2021-08-06,87.08,12
        2021-08-07,86,21
        2021-08-08,87.08,7
        2021-08-09,86,18
        2021-08-10,82.04,17
        2021-08-11,84.02,21
        2021-08-12,86,17
        2021-08-13,84.02,14
        2021-08-14,86,16
        2021-08-15,89.06,10
        2021-08-16,91.04,13
        2021-08-17,86,10
        2021-08-18,82.04,18
        2021-08-19,77,12
        2021-08-20,78.08,13
        2021-08-21,82.04,13
        2021-08-22,84.02,13
        2021-08-23,87.08,19
        2021-08-24,91.04,15
        2021-08-25,93.02,25
        2021-08-26,91.04,13
        2021-08-27,93.02,14
        2021-08-28,95,17
        2021-08-29,91.04,13
        2021-08-30,87.08,17
        2021-08-31,87.08,15
        2021-09-01,89.06,16
        2021-09-02,91.04,20
        2021-09-03,89.06,15
        2021-09-04,89.06,15
        2021-09-05,87.08,11
        2021-09-06,75.02,8
        2021-09-07,78.08,10
        2021-09-08,80.06,10
        2021-09-09,82.04,10
        2021-09-10,84.02,9
        2021-09-11,86,17
        2021-09-12,84.02,17
        2021-09-13,82.04,10
        2021-09-14,84.02,16
        2021-09-15,86,10
        2021-09-16,78.08,15
        2021-09-17,84.02,15
        2021-09-18,84.02,12
        2021-09-19,84.02,11
        2021-09-20,78.08,13
        2021-09-21,71.06,13
        2021-09-22,73.04,16
        2021-09-23,69.08,13
        2021-09-24,73.04,12
        2021-09-25,77,9
        2021-09-26,68,5
        2021-09-27,69.08,7
        2021-09-28,77,9
        2021-09-29,78.08,13
        2021-09-30,71.06,9
        2021-10-01,71.06,13
        2021-10-02,68,10
        2021-10-03,77,10
        2021-10-04,82.04,11
        2021-10-05,82.04,16
        2021-10-06,87.08,21
        2021-10-07,91.04,13
        2021-10-08,86,21
        2021-10-09,78.08,11
        2021-10-10,64.04,31
        2021-10-11,48.02,5
        2021-10-12,48.02,16
        2021-10-13,64.04,11
        2021-10-14,71.06,10
        2021-10-15,71.06,9
        2021-10-16,68,11
        2021-10-17,69.08,9
        2021-10-18,68,9
        2021-10-19,64.04,11
        2021-10-20,57.02,11
        2021-10-21,60.08,13
        2021-10-22,66.02,15
        2021-10-23,66.02,15
        2021-10-24,66.02,9
        2021-10-25,71.06,12
        2021-10-26,51.08,11
        2021-10-27,51.08,8
        2021-10-28,60.08,9
        2021-10-29,55.04,8
        2021-10-30,60.08,10
        2021-10-31,64.04,10
        2021-11-01,68,14
        2021-11-02,73.04,17
        2021-11-03,77,17
        2021-11-04,73.04,13
        2021-11-05,64.04,12
        2021-11-06,68,7
        2021-11-07,66.02,11
        2021-11-08,57.02,10
        2021-11-09,53.06,13
        2021-11-10,60.08,13
        2021-11-11,62.06,8
        2021-11-12,68,13
        2021-11-13,66.02,10
        2021-11-14,46.04,2
        2021-11-15,51.08,10
        2021-11-16,57.02,16
        2021-11-17,59,10
        2021-11-18,48.02,11
        2021-11-19,51.08,10
        2021-11-20,51.08,14
        2021-11-21,48.02,9
        2021-11-22,46.04,4
        2021-11-23,50,8
        2021-11-24,51.08,11
        2021-11-25,50,11
        2021-11-26,46.04,6
        2021-11-27,55.04,8
        2021-11-28,60.08,7
        2021-11-29,57.02,7
        2021-11-30,42.08,9
        2021-12-01,51.08,9
        2021-12-02,55.04,13
        2021-12-03,60.08,8
        2021-12-04,62.06,9
        2021-12-05,66.02,11
        2021-12-06,68,10
        2021-12-07,66.02,11
        2021-12-08,64.04,18
        2021-12-09,57.02,13
        2021-12-10,62.06,13
        2021-12-11,33.08,6
        2021-12-12,48.02,6
        2021-12-13,53.06,9
        2021-12-14,51.08,14
        2021-12-15,42.08,11
        2021-12-16,42.08,12
        2021-12-17,46.04,8
        2021-12-18,50,10
        2021-12-19,55.04,9
        2021-12-20,42.08,7
        2021-12-21,42.08,12
        2021-12-22,51.08,12
        2021-12-23,48.02,14
        2021-12-24,42.08,6
        2021-12-25,46.04,8
        2021-12-26,50,7
        2021-12-27,51.08,13
        2021-12-28,53.06,8
        2021-12-29,51.08,11
        2021-12-30,17.06,8
        2021-12-31,23,15
        2022-01-01,28.04,18
        2022-01-02,35.06,10
        2022-01-03,37.04,16
        2022-01-04,28.04,10
        2022-01-05,21.02,15
        2022-01-06,24.08,10
        2022-01-07,37.04,11
        2022-01-08,39.02,8
        2022-01-09,39.02,11
        2022-01-10,41,12
        2022-01-11,46.04,10
        2022-01-12,48.02,11
        2022-01-13,51.08,18
        2022-01-14,48.02,13
        2022-01-15,50,15
        2022-01-16,57.02,8
        2022-01-17,53.06,10
        2022-01-18,41,21
        2022-01-19,44.06,15
        2022-01-20,46.04,14
        2022-01-21,50,17
        2022-01-22,51.08,10
        2022-01-23,51.08,8
        2022-01-24,51.08,17
        2022-01-25,44.06,10
        2022-01-26,42.08,16
        2022-01-27,44.06,9
        2022-01-28,50,17
        2022-01-29,51.08,9
        2022-01-30,55.04,14
        2022-01-31,62.06,17
        2022-02-01,51.08,14
        2022-02-02,37.04,12
        2022-02-03,19.04,12
        2022-02-04,37.04,9
        2022-02-05,39.02,10
        2022-02-06,42.08,7
        2022-02-07,50,15
        2022-02-08,51.08,12
        2022-02-09,51.08,15
        2022-02-10,55.04,14
        2022-02-11,57.02,10
        2022-02-12,60.08,17
        2022-02-13,60.08,11
        2022-02-14,66.02,8
        2022-02-15,69.08,10
        2022-02-16,71.06,16
        2022-02-17,69.08,13
        2022-02-18,64.04,16
        2022-02-19,60.08,11
        2022-02-20,60.08,10
        2022-02-21,55.04,3
        2022-02-22,26.06,13
        2022-02-23,30.02,12
        2022-02-24,41,17
        2022-02-25,46.04,15
        2022-02-26,51.08,8
        2022-02-27,53.06,13
        2022-02-28,57.02,13
        2022-03-01,60.08,16
        2022-03-02,62.06,15
        2022-03-03,62.06,15
        2022-03-04,62.96,33
        2022-03-05,15.08,8
        2022-03-06,21.02,8
        2022-03-07,48.02,10
        2022-03-08,60.08,15
        2022-03-09,64.04,13
        2022-03-10,60.08,15
        2022-03-11,60.08,11
        2022-03-12,37.04,4
        2022-03-13,48.02,12
        2022-03-14,51.08,11
        2022-03-15,53.06,13
        2022-03-16,55.04,10
        2022-03-17,60.08,15
        2022-03-18,60.08,18
        2022-03-19,68,17
        2022-03-20,73.04,19
        2022-03-21,71.06,15
        2022-03-22,48.02,13
        2022-03-23,51.08,14
        2022-03-24,51.08,18
        2022-03-25,59,17
        2022-03-26,69.08,15
        2022-03-27,71.06,12
        2022-03-28,78.08,13
        2022-03-29,80.06,16
        2022-03-30,77,16
        2022-03-31,57.02,11
        2022-04-01,59,14
        2022-04-02,60.08,8
        2022-04-03,48.02,13
        2022-04-04,44.06,18
        2022-04-05,48.02,12
        2022-04-06,60.08,11
        2022-04-07,66.02,13
        2022-04-08,71.06,13
        2022-04-09,71.06,13
        2022-04-10,75.02,11
        2022-04-11,69.08,12
        2022-04-12,41,11
        2022-04-13,35.06,12
        2022-04-14,46.04,17
        2022-04-15,51.08,13
        2022-04-16,57.02,15
        2022-04-17,60.08,9
        2022-04-18,60.08,7
        2022-04-19,60.08,17
        2022-04-20,55.04,18
        2022-04-21,51.08,17
        2022-04-22,64.04,15
        2022-04-23,35.06,8
        2022-04-24,42.08,12
        2022-04-25,46.04,10
        2022-04-26,53.06,17
        2022-04-27,60.08,14
        2022-04-28,64.04,14
        2022-04-29,73.04,9
        2022-04-30,75.02,18
        2022-05-01,84.02,13
        2022-05-02,84.02,17
        2022-05-03,73.04,10
        2022-05-04,66.02,15
        2022-05-05,60.08,13
        2022-05-06,48.02,17
        2022-05-07,55.04,14
        2022-05-08,64.04,13
        2022-05-09,73.04,10
        2022-05-10,82.04,21
        2022-05-11,60.08,8
        2022-05-12,51.08,15
        2022-05-13,62.06,15
        2022-05-14,73.04,9
        2022-05-15,75.02,17
        2022-05-16,77,15
        2022-05-17,80.06,17
        2022-05-18,80.06,20
        2022-05-19,48.02,11
        2022-05-20,57.02,13
        2022-05-21,51.08,6
        2022-05-22,69.08,12
        2022-05-23,75.02,15
        2022-05-24,78.08,17
        2022-05-25,84.02,15
        2022-05-26,82.04,12
        2022-05-27,73.04,17
        2022-05-28,77,10
        2022-05-29,84.02,14
        2022-05-30,91.04,12
        2022-05-31,95,13
        2022-06-01,84.02,21
        2022-06-02,71.06,12
        2022-06-03,80.06,12
        2022-06-04,87.08,13
        2022-06-05,89.06,13
        2022-06-06,84.02,16
        2022-06-07,82.04,16
        2022-06-08,78.08,8
        2022-06-09,80.06,10
        2022-06-10,78.08,13
        2022-06-11,96.08,13
        2022-06-12,98.06,10
        2022-06-13,98.06,11
        2022-06-14,84.02,11
        2022-06-15,82.04,18
        2022-06-16,89.06,17
        2022-06-17,91.04,15
        2022-06-18,96.08,21
        2022-06-19,98.06,9
        2022-06-20,91.04,9
        2022-06-21,91.04,16
        2022-06-22,86,13
        2022-06-23,86,11
        2022-06-24,87.08,13
        2022-06-25,89.06,13
        2022-06-26,89.06,15
        2022-06-27,84.02,9
        2022-06-28,87.08,21
        2022-06-29,87.08,15
        2022-06-30,86,9
        2022-07-01,84.02,10
        2022-07-02,86,11
        2022-07-03,87.08,15
        2022-07-04,89.06,9
        2022-07-05,89.06,21
        2022-07-06,91.04,16
        2022-07-07,87.08,12
        2022-07-08,89.06,17
        2022-07-09,91.04,18
        2022-07-10,95,17
        2022-07-11,95,11
        2022-07-12,102.02,18
        2022-07-13,98.06,15
        2022-07-14,91.04,17
        2022-07-15,86,15
        2022-07-16,91.94,35
        2022-07-17,89.06,10
        2022-07-18,89.06,17
        2022-07-19,86,21
        2022-07-20,82.04,11
        2022-07-21,89.06,18
        2022-07-22,93.02,11
        2022-07-23,93.92,33
        2022-07-24,91.04,13
        2022-07-25,89.06,13
        2022-07-26,86,18
        2022-07-27,87.08,19
        2022-07-28,87.08,13
        2022-07-29,89.06,15
        2022-07-30,91.04,15
        2022-07-31,91.04,14
        2022-08-01,91.04,16
        2022-08-02,84.02,20
        2022-08-03,82.04,8
        2022-08-04,86,15
        2022-08-05,87.08,11
        2022-08-06,86,16
        2022-08-07,86,12
        2022-08-08,86,13
        2022-08-09,82.04,17
        2022-08-10,86,14
        2022-08-11,87.08,23
        2022-08-12,87.08,21
        2022-08-13,86,11
        2022-08-14,89.06,15
        2022-08-15,91.04,19
        2022-08-16,86,13
        2022-08-17,87.08,14
        2022-08-18,87.08,9
        2022-08-19,87.08,15
        2022-08-20,75.02,31
        2022-08-21,80.06,13
        2022-08-22,73.04,15
        2022-08-23,78.08,13
        2022-08-24,78.08,13
        2022-08-25,80.06,14
        2022-08-26,84.02,15
        2022-08-27,84.92,33
        2022-08-28,87.08,13
        2022-08-29,82.04,13
        2022-08-30,87.08,17
        2022-08-31,89.06,11
        2022-09-01,86,15
        2022-09-02,84.02,17
        2022-09-03,87.08,18
        2022-09-04,89.06,18
        2022-09-05,89.06,8
        2022-09-06,93.02,17
        2022-09-07,86,21
        2022-09-08,82.04,17
        2022-09-09,71.06,11
        2022-09-10,73.04,10
        2022-09-11,78.08,6
        2022-09-12,80.06,15
        2022-09-13,78.08,16
        2022-09-14,77,9
        2022-09-15,77,12
        2022-09-16,73.04,11
        2022-09-17,73.04,9
        2022-09-18,73.04,8
        2022-09-19,73.04,16
        2022-09-20,73.04,17
        2022-09-21,77,13
        2022-09-22,80.06,11
        2022-09-23,82.04,11
        2022-09-24,80.06,11
        2022-09-25,80.06,18
        2022-09-26,80.06,11
        2022-09-27,78.08,15
        2022-09-28,82.04,10
        2022-09-29,84.02,13
        2022-09-30,86,14
        2022-10-01,87.08,17
        2022-10-02,87.08,11
        2022-10-03,77,15
        2022-10-04,82.04,12
        2022-10-05,78.08,10
        2022-10-06,71.06,12
        2022-10-07,71.06,16
        2022-10-08,68,6
        2022-10-09,75.02,10
        2022-10-10,73.04,31
        2022-10-11,69.08,14
        2022-10-12,57.02,10
        2022-10-13,71.06,14
        2022-10-14,75.02,15
        2022-10-15,78.08,15
        2022-10-16,78.08,9
        2022-10-17,73.04,10
        2022-10-18,62.06,10
        2022-10-19,66.02,13
        2022-10-20,71.06,20
        2022-10-21,64.04,9
        2022-10-22,73.94,31
        2022-10-23,60.08,9
        2022-10-24,68,13
        2022-10-25,75.02,13
        2022-10-26,69.08,12
        2022-10-27,44.06,12
        2022-10-28,50,13
        2022-10-29,53.06,11
        2022-10-30,53.06,11
        2022-10-31,51.08,16
        2022-11-01,57.02,13
        2022-11-02,60.08,13
        2022-11-03,59,13
        2022-11-04,62.06,12
        2022-11-05,66.02,17
        2022-11-06,69.08,11
        2022-11-07,73.04,12
        2022-11-08,71.06,18
        2022-11-09,39.02,11
        2022-11-10,32,7
        2022-11-11,44.06,15
        2022-11-12,46.04,13
        2022-11-13,53.06,14
        2022-11-14,35.06,31
        2022-11-15,69.08,18
        2022-11-16,42.08,14
        2022-11-17,28.04,11
        2022-11-18,30.02,9
        2022-11-19,33.08,10
        2022-11-20,37.04,15
        2022-11-21,42.08,18
        2022-11-22,51.08,12
        2022-11-23,55.04,12
        2022-11-24,60.08,4
        2022-11-25,64.04,16
        2022-11-26,66.02,13
        2022-11-27,68,11
        2022-11-28,68,13
        2022-11-29,53.06,12
        2022-11-30,33.08,13
        2022-12-01,33.08,15
        2022-12-02,41,14
        2022-12-03,48.02,9
        2022-12-04,50,8
        2022-12-05,57.02,11
        2022-12-06,57.02,8
        2022-12-07,62.06,15
        2022-12-08,64.04,12
        2022-12-09,66.02,18
        2022-12-10,68,15
        2022-12-11,69.08,9
        2022-12-12,68,10
        2022-12-13,50,15
        2022-12-14,33.08,9
        2022-12-15,15.08,14
        2022-12-16,17.06,8
        2022-12-17,26.06,9
        2022-12-18,32,12
        2022-12-19,33.08,9
        2022-12-20,8.06,15
        2022-12-21,8.06,15
        2022-12-22,-2,9
        2022-12-23,21.02,7
        2022-12-24,32,9
        2022-12-25,37.04,11
        2022-12-26,33.08,9
        2022-12-27,39.02,8
        2022-12-28,42.08,10
        2022-12-29,48.02,12
        2022-12-30,48.02,13
        2022-12-31,50,11
        2023-01-01,48.02,15
        2023-01-02,50,9
        2023-01-03,51.08,8
        2023-01-04,51.08,11
        2023-01-05,57.02,8
        2023-01-06,60.08,10
        2023-01-07,60.08,6
        2023-01-08,62.06,14
        2023-01-09,66.02,11
        2023-01-10,68,16
        2023-01-11,60.08,13
        2023-01-12,55.04,12
        2023-01-13,48.02,15
        2023-01-14,51.08,9
        2023-01-15,44.06,7
        2023-01-16,51.08,12
        2023-01-17,51.08,21
        2023-01-18,53.06,13
        2023-01-19,57.02,15
        2023-01-20,57.02,9
        2023-01-21,55.04,11
        2023-01-22,57.02,13
        2023-01-23,51.08,15
        2023-01-24,50,15
        2023-01-25,50,15
        2023-01-26,53.06,8
        2023-01-27,60.08,15
        2023-01-28,62.06,8
        2023-01-29,66.02,11
        2023-01-30,55.04,11
        2023-01-31,44.06,7
        2023-02-01,42.08,15
        2023-02-02,44.06,18
        2023-02-03,51.08,13
        2023-02-04,51.08,9
        2023-02-05,55.04,10
        2023-02-06,55.04,13
        2023-02-07,60.08,11
        2023-02-08,42.08,13
        2023-02-09,48.02,11
        2023-02-10,53.06,16
        2023-02-11,60.08,15
        2023-02-12,53.06,12
        2023-02-13,37.04,10
        2023-02-14,28.04,9
        2023-02-15,33.08,7
        2023-02-16,39.02,11
        2023-02-17,42.08,10
        2023-02-18,42.08,10
        2023-02-19,42.08,12
        2023-02-20,44.06,4
        2023-02-21,42.08,15
        2023-02-22,26.06,14
        2023-02-23,15.08,10
        2023-02-24,21.02,15
        2023-02-25,30.02,10
        2023-02-26,35.06,7
        2023-02-27,39.02,12
        2023-02-28,42.08,12
        2023-03-01,46.04,17
        2023-03-02,44.06,18
        2023-03-03,44.06,17
        2023-03-04,46.04,18
        2023-03-05,48.02,8
        2023-03-06,51.08,11
        2023-03-07,55.04,12
        2023-03-08,55.04,14
        2023-03-09,59,13
        2023-03-10,59,13
        2023-03-11,57.02,5
        2023-03-12,53.06,11
        2023-03-13,51.08,11
        2023-03-14,53.06,16
        2023-03-15,55.04,16
        2023-03-16,57.02,14
        2023-03-17,62.06,13
        2023-03-18,64.04,15
        2023-03-19,66.02,21
        2023-03-20,71.06,20
        2023-03-21,69.08,14
        2023-03-22,69.08,15
        2023-03-23,66.02,12
        2023-03-24,37.04,10
        2023-03-25,41,8
        2023-03-26,51.08,18
        2023-03-27,53.06,14
        2023-03-28,53.06,9
        2023-03-29,57.02,11
        2023-03-30,66.02,19
        2023-03-31,48.02,13
        2023-04-01,57.02,10
        2023-04-02,66.02,12
        2023-04-03,55.04,17
        2023-04-04,57.02,13
        2023-04-05,51.08,16
        2023-04-06,50,14
        2023-04-07,48.02,10
        2023-04-08,59,11
        2023-04-09,59,9
        2023-04-10,57.02,6
        2023-04-11,50,15
        2023-04-12,51.08,17
        2023-04-13,57.02,7
        2023-04-14,64.04,17
        2023-04-15,68,13
        2023-04-16,68,13
        2023-04-17,66.02,15
        2023-04-18,71.06,17
        2023-04-19,55.04,13
        2023-04-20,51.08,15
        2023-04-21,62.06,12
        2023-04-22,68,17
        2023-04-23,69.08,15
        2023-04-24,55.04,11
        2023-04-25,55.04,9
        2023-04-26,60.08,10
        2023-04-27,60.08,12
        2023-04-28,66.02,11
        2023-04-29,66.02,10
        2023-04-30,68,12
        2023-05-01,69.08,17
        2023-05-02,69.08,15
        2023-05-03,71.06,13
        2023-05-04,73.04,10
        2023-05-05,77,17
        2023-05-06,78.08,12
        2023-05-07,82.04,14
        2023-05-08,82.04,12
        2023-05-09,82.04,21
        2023-05-10,68,10
        2023-05-11,39.02,9
        2023-05-12,35.06,10
        2023-05-13,48.02,12
        2023-05-14,64.04,15
        2023-05-15,69.08,14
        2023-05-16,69.08,13
        2023-05-17,73.04,17
        2023-05-18,71.06,16
        2023-05-19,71.06,11
        2023-05-20,73.04,15
        2023-05-21,75.02,13
        2023-05-22,66.02,16
        2023-05-23,71.06,15
        2023-05-24,75.02,17
        2023-05-25,78.08,11
        2023-05-26,82.04,13
        2023-05-27,82.04,21
        2023-05-28,84.02,15
        2023-05-29,84.02,8
        2023-05-30,84.02,13
        2023-05-31,87.08,21
        2023-06-01,87.08,17
        2023-06-02,82.04,16
        2023-06-03,82.04,11
        2023-06-04,84.02,15
        2023-06-05,87.08,9
        2023-06-06,87.08,13
        2023-06-07,82.04,13
        2023-06-08,87.08,17
        2023-06-09,87.08,13
        2023-06-10,86,13
        2023-06-11,89.06,16
        2023-06-12,89.06,16
        2023-06-13,82.04,11
        2023-06-14,82.04,13
        2023-06-15,84.02,13
        2023-06-16,84.02,13
        2023-06-17,87.08,10
        2023-06-18,89.06,8
        2023-06-19,87.08,34
        2023-06-20,89.06,12
        2023-06-21,89.06,12
        2023-06-22,91.04,15
        2023-06-23,98.06,20
        2023-06-24,98.06,17
        2023-06-25,102.02,11
        2023-06-26,104,17
        2023-06-27,95,13
        2023-06-28,87.08,13
        2023-06-29,84.02,15
        2023-06-30,86,9
        2023-07-01,87.08,18
        2023-07-02,87.08,10
        2023-07-03,87.08,16
        2023-07-04,91.04,9
        2023-07-05,66.92,40
        2023-07-06,78.08,13
        2023-07-07,82.04,14
        2023-07-08,86,13
        2023-07-09,84.02,9
        2023-07-10,84.02,12
        2023-07-11,87.08,13
        2023-07-12,87.08,15
        2023-07-13,86,21
        2023-07-14,78.08,19
        2023-07-15,82.94,31
        2023-07-16,84.92,33
        2023-07-17,91.04,17
        2023-07-18,91.04,18
        2023-07-19,87.08,17
        2023-07-20,87.08,17
        2023-07-21,87.08,14
        2023-07-22,91.04,12
        2023-07-23,93.92,33
        2023-07-24,86,12
        2023-07-25,89.06,14
        2023-07-26,91.04,14
        2023-07-27,91.04,14
        2023-07-28,91.04,13
        2023-07-29,87.08,33
        2023-07-30,91.04,31
        2023-07-31,89.06,35
        2023-08-01,84.02,13
        2023-08-02,82.04,9
        2023-08-03,86,13
        2023-08-04,87.08,17
        2023-08-05,87.08,15
        2023-08-06,86,13
        2023-08-07,86,15
        2023-08-08,89.06,18
        2023-08-09,91.04,16
        2023-08-10,91.04,15
        2023-08-11,86,15
        2023-08-12,89.06,12
        2023-08-13,71.06,31
        2023-08-14,91.04,17
        2023-08-15,91.04,16
        2023-08-16,91.04,17
        2023-08-17,87.08,19
        2023-08-18,87.08,11
        2023-08-19,84.02,13
        2023-08-20,86,17
        2023-08-21,86,13
        2023-08-22,82.04,13
        2023-08-23,89.06,13
        2023-08-24,100.04,21
        2023-08-25,89.06,15
        2023-08-26,86,14
        2023-08-27,87.08,31
        2023-08-28,84.02,15
        2023-08-29,84.02,16
        2023-08-30,82.04,14
        2023-08-31,84.02,13
        2023-09-01,86,21
        2023-09-02,89.06,12
        2023-09-03,86,16
        2023-09-04,87.08,14
        2023-09-05,82.04,12
        2023-09-06,84.02,15
        2023-09-07,87.08,10
        2023-09-08,84.02,16
        2023-09-09,89.06,12
        2023-09-10,84.02,18
        2023-09-11,84.02,17
        2023-09-12,87.08,11
        2023-09-13,82.04,14
        2023-09-14,75.02,15
        2023-09-15,71.06,12
        2023-09-16,75.02,13
        2023-09-17,80.06,17
        2023-09-18,84.02,15
        2023-09-19,82.04,21
        2023-09-20,73.04,12
        2023-09-21,68,9
        2023-09-22,71.06,9
        2023-09-23,62.06,8
        2023-09-24,77,33
        2023-09-25,80.06,12
        2023-09-26,82.04,17
        2023-09-27,84.02,15
        2023-09-28,89.06,18
        2023-09-29,89.06,16
        2023-09-30,93.02,11
        2023-10-01,91.04,13
        2023-10-02,75.02,16
        2023-10-03,66.02,8
        2023-10-04,66.02,10
        2023-10-05,73.04,15
        2023-10-06,77,15
        2023-10-07,80.06,13
        2023-10-08,82.04,19
        2023-10-09,84.02,15
        2023-10-10,84.02,20
        2023-10-11,87.08,13
        2023-10-12,87.08,11
        2023-10-13,82.04,12
        2023-10-14,84.02,9
        2023-10-15,71.06,8
        2023-10-16,73.94,34
        2023-10-17,48.02,10
        2023-10-18,57.02,12
        2023-10-19,66.02,17
        2023-10-20,69.08,10
        2023-10-21,64.04,17
        2023-10-22,66.02,8
        2023-10-23,80.96,31
        2023-10-24,75.02,13
        2023-10-25,78.08,18
        2023-10-26,77,12
        2023-10-27,71.06,11
        2023-10-28,55.04,14
        2023-10-29,53.06,12
        2023-10-30,59,13
        2023-10-31,66.02,8
        2023-11-01,71.06,11
        2023-11-02,73.04,18
        2023-11-03,73.04,17
        2023-11-04,77,15
        2023-11-05,73.04,10
        2023-11-06,66.02,10
        2023-11-07,62.06,13
        2023-11-08,64.04,9
        2023-11-09,64.04,13
        2023-11-10,51.08,15
        2023-11-11,51.08,7
        2023-11-12,51.08,14
        2023-11-13,51.08,17
        2023-11-14,53.06,13
        2023-11-15,48.02,11
        2023-11-16,44.06,15
        2023-11-17,55.04,8
        2023-11-18,60.08,10
        2023-11-19,55.04,9
        2023-11-20,42.08,16
        2023-11-21,50,10
        2023-11-22,42.08,8
        2023-11-23,46.04,9
        2023-11-24,46.04,11
        2023-11-25,42.08,14
        2023-11-26,48.02,6
        2023-11-27,57.02,18
        2023-11-28,66.02,11
        2023-11-29,64.04,13
        2023-11-30,42.08,13
        2023-12-01,44.06,14
        2023-12-02,44.06,9
        2023-12-03,48.02,9
        2023-12-04,51.08,13
        2023-12-05,51.08,9
        2023-12-06,46.04,12
        2023-12-07,42.08,12
        2023-12-08,48.02,13
        2023-12-09,48.02,12
        2023-12-10,53.06,9
        2023-12-11,51.08,15
        2023-12-12,48.02,10
        2023-12-13,46.04,8
        2023-12-14,55.04,12
        2023-12-15,55.04,9
        2023-12-16,51.08,14
        2023-12-17,48.02,8
        2023-12-18,44.06,13
        2023-12-19,42.08,13
        2023-12-20,44.06,17
        2023-12-21,44.06,14
        2023-12-22,42.08,9
        2023-12-23,44.06,11
        2023-12-24,44.06,8
        2023-12-25,41,8
        2023-12-26,37.04,9
        2023-12-27,35.06,15
        2023-12-28,46.04,10
        2023-12-29,48.02,17
        2023-12-30,39.02,11
        2023-12-31,42.08,12
        2024-01-01,44.06,11
        2024-01-02,46.04,13
        2024-01-03,55.04,13
        2024-01-04,51.08,11
        2024-01-05,48.02,13
        2024-01-06,53.06,7
        2024-01-07,53.06,17
        2024-01-08,51.08,16
        2024-01-09,23,13
        2024-01-10,33.08,8
        2024-01-11,48.02,13
        2024-01-12,30.02,11
        2024-01-13,17.06,8
        2024-01-14,17.06,8
        2024-01-15,8.06,12
        2024-01-16,12.02,12
        2024-01-17,37.04,13
        2024-01-18,53.06,15
        2024-01-19,62.06,17
        2024-01-20,66.02,12
        2024-01-21,68,8
        2024-01-22,60.08,14
        2024-01-23,42.08,9
        2024-01-24,50,14
        2024-01-25,57.02,8
        2024-01-26,60.08,13
        2024-01-27,46.04,32
        2024-01-28,66.02,10
        2024-01-29,68,11
        2024-01-30,71.06,16
        2024-01-31,66.02,17
        2024-02-01,68,13
        2024-02-02,71.06,15
        2024-02-03,73.04,11
        2024-02-04,71.06,14
        2024-02-05,68,9
        2024-02-06,60.08,13
        2024-02-07,64.04,18
        2024-02-08,66.02,14
        2024-02-09,69.08,18
        2024-02-10,73.04,11
        2024-02-11,78.08,20
        2024-02-12,73.04,15
        2024-02-13,59,13
        2024-02-14,59,13
        2024-02-15,59,14
        2024-02-16,60.08,15
        2024-02-17,62.06,14
        2024-02-18,64.04,12
        2024-02-19,66.02,16
        2024-02-20,62.06,13
        2024-02-21,68,11
        2024-02-22,66.02,18
        2024-02-23,62.06,13
        2024-02-24,60.08,17
        2024-02-25,64.04,31
        2024-02-26,69.08,13
        2024-02-27,75.02,17
        2024-02-28,73.04,14
        2024-02-29,48.02,15
        2024-03-01,53.06,13
        2024-03-02,60.08,15
        2024-03-03,53.06,9
        2024-03-04,60.08,13
        2024-03-05,69.08,17
        2024-03-06,69.08,18
        2024-03-07,62.06,15
        2024-03-08,66.02,11
        2024-03-09,69.08,14
        2024-03-10,69.08,9
        2024-03-11,71.06,14
        2024-03-12,68,14
        2024-03-13,46.04,10
        2024-03-14,50,15
        2024-03-15,60.08,15
        2024-03-16,62.06,13
        2024-03-17,44.06,34
        2024-03-18,71.06,13
        2024-03-19,73.04,13
        2024-03-20,71.06,17
        2024-03-21,62.06,17
        2024-03-22,60.08,13
        2024-03-23,68,13
        2024-03-24,73.04,14
        2024-03-25,66.02,10
        2024-03-26,55.04,13
        2024-03-27,62.06,12
        2024-03-28,66.02,13
        2024-03-29,55.04,11
        2024-03-30,55.04,11
        2024-03-31,62.06,10
        2024-04-01,68,16
        2024-04-02,73.04,11
        2024-04-03,78.08,21
        2024-04-04,78.08,11
        2024-04-05,73.04,13
        2024-04-06,73.04,15
        2024-04-07,73.04,17
        2024-04-08,69.08,15
        2024-04-09,51.08,12
        2024-04-10,53.06,12
        2024-04-11,62.06,9
        2024-04-12,69.08,13
        2024-04-13,73.04,13
        2024-04-14,75.02,11
        2024-04-15,66.02,15
        2024-04-16,50,13
        2024-04-17,62.06,17
        2024-04-18,71.06,16
        2024-04-19,71.06,18
        2024-04-20,71.06,9
        2024-04-21,75.02,17
        2024-04-22,77,13
        2024-04-23,77,13
        2024-04-24,78.08,15
        2024-04-25,82.04,15
        2024-04-26,59,11
        2024-04-27,42.08,15
        2024-04-28,51.08,7
        2024-04-29,59,8
        2024-04-30,66.02,15
        2024-05-01,73.04,14
        2024-05-02,78.08,8
        2024-05-03,82.04,17
        2024-05-04,84.02,21
        2024-05-05,84.02,15
        2024-05-06,87.08,21
        2024-05-07,78.08,17
        2024-05-08,60.08,14
        2024-05-09,48.02,13
        2024-05-10,55.04,13
        2024-05-11,59,14
        2024-05-12,66.02,9
        2024-05-13,69.08,18
        2024-05-14,73.04,13
        2024-05-15,75.02,17
        2024-05-16,78.08,18
        2024-05-17,82.04,13
        2024-05-18,78.08,18
        2024-05-19,75.02,13
        2024-05-20,73.04,10
        2024-05-21,71.06,18
        2024-05-22,71.06,9
        2024-05-23,75.02,15
        2024-05-24,77,17
        2024-05-25,77,13
        2024-05-26,80.06,14
        2024-05-27,82.04,10
        2024-05-28,77,31
        2024-05-29,78.08,17
        2024-05-30,82.04,18
        2024-05-31,78.08,17
        2024-06-01,73.04,15
        2024-06-02,75.02,10
        2024-06-03,82.04,10
        2024-06-04,84.02,17
        2024-06-05,87.08,18
        2024-06-06,87.08,16
        2024-06-07,91.04,15
        2024-06-08,87.08,13
        2024-06-09,84.02,15
        2024-06-10,89.06,15
        2024-06-11,82.04,10
        2024-06-12,80.06,9
        2024-06-13,84.02,18
        2024-06-14,87.08,17
        2024-06-15,86,13
        2024-06-16,89.96,39
        2024-06-17,89.06,11
        2024-06-18,87.08,12
        2024-06-19,91.04,13
        2024-06-20,89.06,14
        2024-06-21,84.02,32
        2024-06-22,87.08,18
        2024-06-23,93.92,32
        2024-06-24,89.06,12
        2024-06-25,93.02,13
        2024-06-26,87.08,12
        2024-06-27,87.08,17
        2024-06-28,91.04,11
        2024-06-29,87.98,34
        2024-06-30,95,11
        2024-07-01,95,18
        2024-07-02,87.08,12
        2024-07-03,82.04,16
        2024-07-04,73.04,7
        2024-07-05,78.08,33
        2024-07-06,82.04,15
        2024-07-07,77,34
        2024-07-08,89.06,21
        2024-07-09,95,18
        2024-07-10,100.04,16
        2024-07-11,102.02,18
        2024-07-12,102.02,17
        2024-07-13,104,21
        2024-07-14,102.02,18
        2024-07-15,91.04,11
        2024-07-16,93.02,10
        2024-07-17,98.06,17
        2024-07-18,96.08,15
        2024-07-19,96.08,16
        2024-07-20,98.06,18
        2024-07-21,75.02,31
        2024-07-22,98.06,17
        2024-07-23,98.06,16
        2024-07-24,98.06,14
        2024-07-25,89.06,12
        2024-07-26,87.08,16
        2024-07-27,84.02,9
        2024-07-28,87.08,17
        2024-07-29,89.06,13
        2024-07-30,89.06,12
        2024-07-31,86,13
        2024-08-01,89.06,18
        2024-08-02,91.04,13
        2024-08-03,93.02,14
        2024-08-04,96.98,32
        2024-08-05,86,16
        2024-08-06,87.08,17
        2024-08-07,87.08,9
        2024-08-08,89.06,11
        2024-08-09,89.06,13
        2024-08-10,84.02,33
        2024-08-11,87.08,13
        2024-08-12,93.02,17
        2024-08-13,93.02,13
        2024-08-14,89.06,11
        2024-08-15,87.08,13
        2024-08-16,87.08,16
        2024-08-17,91.04,18
        2024-08-18,93.02,37
        2024-08-19,87.08,13
        2024-08-20,86,17
        2024-08-21,87.08,13
        2024-08-22,87.08,19
        2024-08-23,84.02,11
        2024-08-24,82.04,18
        2024-08-25,78.08,8
        2024-08-26,80.06,13
        2024-08-27,75.02,10
        2024-08-28,78.08,13
        2024-08-29,82.04,12
        2024-08-30,84.02,17
        2024-08-31,82.04,11
        2024-09-01,78.08,17
        2024-09-02,78.08,13
        2024-09-03,82.04,10
        2024-09-04,82.04,8
        2024-09-05,82.04,16
        2024-09-06,84.02,15
        2024-09-07,86,14
        2024-09-08,86,12
        2024-09-09,84.02,13
        2024-09-10,82.04,17
        2024-09-11,82.04,10
        2024-09-12,82.04,18
        2024-09-13,78.08,15
        2024-09-14,77,11
        2024-09-15,80.06,11
        2024-09-16,82.04,16
        2024-09-17,84.02,13
        2024-09-18,80.06,17
        2024-09-19,82.04,13
        2024-09-20,84.02,16
        2024-09-21,66.92,35
        2024-09-22,87.08,14
        2024-09-23,87.08,17
        2024-09-24,84.02,21
        2024-09-25,73.04,13
        2024-09-26,69.08,12
        2024-09-27,78.08,17
        2024-09-28,82.04,17
        2024-09-29,84.02,18
        2024-09-30,80.06,15
        2024-10-01,73.04,13
        2024-10-02,73.04,13
        2024-10-03,75.02,14
        2024-10-04,77,16
        2024-10-05,78.08,13
        2024-10-06,80.06,15
        2024-10-07,80.06,19
        2024-10-08,78.08,17
        2024-10-09,78.08,17
        2024-10-10,77,13
        2024-10-11,73.04,21
        2024-10-12,73.04,10
        2024-10-13,77,12
        2024-10-14,82.04,21
        2024-10-15,82.04,15
        2024-10-16,78.08,17
        2024-10-17,82.04,12
        2024-10-18,82.04,19
        2024-10-19,82.04,14
        2024-10-20,80.06,9
        2024-10-21,73.04,15
        2024-10-22,68,13
        2024-10-23,60.08,13
        2024-10-24,59,11
        2024-10-25,68,7
        2024-10-26,73.04,12
        2024-10-27,73.04,13
        2024-10-28,75.02,12
        2024-10-29,78.08,13
        2024-10-30,75.02,17
        2024-10-31,62.06,9
        2024-11-01,69.08,13
        2024-11-02,71.06,15
        2024-11-03,55.04,37
        2024-11-04,62.06,12
        2024-11-05,46.04,13
        2024-11-06,37.04,18
        2024-11-07,48.02,18
        2024-11-08,59,14
        2024-11-09,62.06,11
        2024-11-10,62.06,16
        2024-11-11,62.06,13
        2024-11-12,64.04,17
        2024-11-13,64.04,13
        2024-11-14,66.02,13
        2024-11-15,68,16
        2024-11-16,68,9
        2024-11-17,66.02,14
        2024-11-18,60.08,14
        2024-11-19,48.02,14
        2024-11-20,50,13
        2024-11-21,55.04,17
        2024-11-22,57.02,13
        2024-11-23,60.08,11
        2024-11-24,59,13
        2024-11-25,46.04,12
        2024-11-26,44.06,17
        2024-11-27,48.02,12
        2024-11-28,51.08,14
        2024-11-29,55.04,11
        2024-11-30,55.04,15
        2024-12-01,51.08,8
        2024-12-02,51.08,10
        2024-12-03,50,12
        2024-12-04,44.06,13
        2024-12-05,48.02,17
        2024-12-06,51.08,17
        2024-12-07,57.02,11
        2024-12-08,55.04,13
        2024-12-09,46.04,15
        2024-12-10,44.06,14
        2024-12-11,48.02,15
        2024-12-12,51.08,21
        2024-12-13,50,18
        2024-12-14,55.04,17
        2024-12-15,60.08,12
        2024-12-16,62.06,15
        2024-12-17,66.02,12
        2024-12-18,64.04,13
        2024-12-19,60.08,14
        2024-12-20,64.04,16
        2024-12-21,66.02,17
        2024-12-22,64.04,15
        2024-12-23,55.04,15
        2024-12-24,44.06,8
        2024-12-25,42.08,9
        2024-12-26,42.08,10
        2024-12-27,46.04,15
        2024-12-28,51.08,23
        2024-12-29,59,20
        2024-12-30,46.04,22
        2024-12-31,35.96,15`;
        
        // Global variables
        let chart;
        let currentDuration = 450000; // 450 seconds default (user preference)
        let currentVolume = 0.7;
        let isPlaying = false;
        let isPaused = false;
        let combinedData = [];
        let minTemp, maxTemp, avgTemp;
        let minCrime, maxCrime;
        let crimeMode = 'both'; // Default to both tracks
        
        // Parse CSV content
        function parseCSV(csvContent) {
            const lines = csvContent.trim().split('\n').filter(line => line.trim() !== ''); // Filter out empty lines
            const hasHeader = isNaN(parseFloat(lines[0].split(',')[1]));
            const startIndex = hasHeader ? 1 : 0;
            
            combinedData = [];
            const temps = [];
            const crimes = [];
            
            for (let i = startIndex; i < lines.length; i++) {
                const parts = lines[i].split(',');
                if (parts.length >= 3) {
                    const dateStr = parts[0].trim();
                    // More explicit date parsing to avoid timezone issues
                    const dateParts = dateStr.split('-');
                    const year = parseInt(dateParts[0]);
                    const month = parseInt(dateParts[1]) - 1; // JavaScript months are 0-indexed
                    const day = parseInt(dateParts[2]);
                    const dateObj = new Date(year, month, day);
                    const timestamp = dateObj.getTime();
                    const temp = parseFloat(parts[1].trim());
                    const crime = parseInt(parts[2].trim());
                    
                    if (!isNaN(timestamp) && !isNaN(temp) && !isNaN(crime)) {
                        combinedData.push({
                            x: timestamp,
                            y: temp,
                            crime: crime,
                            dateStr: dateStr // Keep original date string for debugging
                        });
                        temps.push(temp);
                        crimes.push(crime);
                    }
                }
            }
            
            if (combinedData.length > 0) {
                // Calculate statistics
                minTemp = Math.min(...temps);
                maxTemp = Math.max(...temps);
                avgTemp = temps.reduce((a, b) => a + b, 0) / temps.length;
                minCrime = Math.min(...crimes);
                maxCrime = Math.max(...crimes);
                
                // Update description
                const startDate = new Date(combinedData[0].x);
                const endDate = new Date(combinedData[combinedData.length - 1].x);
                
                // Debug logging
                console.log('First data point:', combinedData[0].dateStr, 'Year:', startDate.getFullYear());
                console.log('Last data point:', combinedData[combinedData.length - 1].dateStr, 'Year:', endDate.getFullYear());
                
                const dateRange = `${startDate.getFullYear()}-${endDate.getFullYear()}`;
                
                document.getElementById('dataDescription').textContent = 
                    `${dateRange} | ${combinedData.length} days of data | Temperature: ${minTemp.toFixed(0)}°F to ${maxTemp.toFixed(0)}°F | Violent Crime: ${minCrime} to ${maxCrime} per day`;
                
                showStatus(`Loaded ${combinedData.length} data points`);
                document.getElementById('sonification-controls').style.display = 'block';
                updatePlaybackInfo();
                createChart();
            } else {
                showStatus('No valid data found in CSV', true);
            }
        }
        
        // Update crime mode
        function updateCrimeMode() {
            crimeMode = document.getElementById('crime-mode').value;
            
            const mappingDesc = document.getElementById('mapping-description');
            const multitrackDetail = document.getElementById('multitrack-detail');
            
            switch(crimeMode) {
                case 'temp-only':
                    mappingDesc.innerHTML = '• Temperature → Continuous tone (left speaker): Low frequency = cold, High frequency = hot<br>• Violent Crime → Disabled';
                    multitrackDetail.style.display = 'none';
                    break;
                case 'crime-only':
                    mappingDesc.innerHTML = '• Temperature → Disabled<br>• Violent Crime → Multiple staccato notes (right speaker): More notes = higher violent crime count';
                    multitrackDetail.style.display = 'block';
                    break;
                case 'both':
                    mappingDesc.innerHTML = '• Temperature → Continuous tone (left speaker): Low frequency = cold, High frequency = hot<br>• Violent Crime → Multiple staccato notes (right speaker): More notes = higher violent crime count';
                    multitrackDetail.style.display = 'block';
                    break;
            }
            
            // Recreate chart with new settings
            if (chart) {
                createChart();
            }
        }
        
        // Create temperature zones for gradient effect
        function createTemperatureZones() {
            const zones = [];
            
            // Create smooth gradient with more zones
            // Still centered around actual average temperature
            zones.push({
                value: minTemp + (avgTemp - minTemp) * 0.25,
                color: '#0066FF' // Deep blue
            });
            zones.push({
                value: minTemp + (avgTemp - minTemp) * 0.50,
                color: '#3380FF' // Medium blue
            });
            zones.push({
                value: minTemp + (avgTemp - minTemp) * 0.75,
                color: '#66AAFF' // Light blue
            });
            zones.push({
                value: avgTemp - (avgTemp - minTemp) * 0.1,
                color: '#99CCFF' // Very light blue
            });
            zones.push({
                value: avgTemp,
                color: '#FFFACD' // Pale yellow at exact average
            });
            zones.push({
                value: avgTemp + (maxTemp - avgTemp) * 0.1,
                color: '#FFE4B5' // Moccasin
            });
            zones.push({
                value: avgTemp + (maxTemp - avgTemp) * 0.25,
                color: '#FFB6C1' // Light pink
            });
            zones.push({
                value: avgTemp + (maxTemp - avgTemp) * 0.50,
                color: '#FF8888' // Light red
            });
            zones.push({
                value: avgTemp + (maxTemp - avgTemp) * 0.75,
                color: '#FF6666' // Medium red
            });
            zones.push({
                color: '#FF0000' // Deep red
            });
            
            return zones;
        }
        
        // Update playback info
        function updatePlaybackInfo() {
            if (combinedData.length > 0) {
                const durationSec = currentDuration / 1000;
                const msPerPoint = currentDuration / combinedData.length;
                document.getElementById('playback-details').textContent = 
                    `${combinedData.length} points over ${durationSec}s = ${msPerPoint.toFixed(1)}ms per point`;
            }
        }
        
        // Control functions
        function playChart() {
            if (chart) {
                if (isPaused && chart.sonification && chart.sonification.isPlaying) {
                    // Resume from pause
                    chart.toggleSonify(false);
                    isPaused = false;
                    isPlaying = true;
                    document.getElementById('play-btn').textContent = '▶ Play';
                    document.getElementById('play-btn').disabled = true;
                    document.getElementById('pause-btn').disabled = false;
                    showStatus('Resumed');
                } else {
                    // Start fresh playback
                    const sonifyOptions = {
                        duration: currentDuration,
                        order: 'simultaneous',
                        masterVolume: currentVolume,
                        onEnd: function() {
                            isPlaying = false;
                            isPaused = false;
                            document.getElementById('play-btn').disabled = false;
                            document.getElementById('play-btn').textContent = '▶ Play';
                            document.getElementById('pause-btn').disabled = true;
                            document.getElementById('stop-btn').disabled = false;
                            showStatus('Playback completed');
                        },
                        onPlay: function() {
                            showStatus('Playing...');
                        }
                    };
                    
                    try {
                        chart.sonify(sonifyOptions);
                        isPlaying = true;
                        isPaused = false;
                        document.getElementById('play-btn').disabled = true;
                        document.getElementById('pause-btn').disabled = false;
                        document.getElementById('stop-btn').disabled = false;
                    } catch (error) {
                        console.error('Sonification error:', error);
                        showStatus('Error starting playback: ' + error.message, true);
                    }
                }
            }
        }
        
        function pauseChart() {
            if (chart && isPlaying) {
                chart.toggleSonify(false);
                isPaused = true;
                isPlaying = false;
                document.getElementById('play-btn').disabled = false;
                document.getElementById('play-btn').textContent = '▶ Resume';
                document.getElementById('pause-btn').disabled = true;
                showStatus('Paused');
            }
        }
        
        function stopChart() {
            if (chart && chart.sonification) {
                chart.sonification.cancel();
                isPlaying = false;
                isPaused = false;
                document.getElementById('play-btn').disabled = false;
                document.getElementById('play-btn').textContent = '▶ Play';
                document.getElementById('pause-btn').disabled = true;
                document.getElementById('stop-btn').disabled = true;
                showStatus('Stopped');
            }
        }
        
        function resetChart() {
            stopChart();
            if (chart && chart.xAxis && chart.xAxis[0]) {
                chart.xAxis[0].setExtremes(null, null);
            }
            document.getElementById('play-btn').textContent = '▶ Play';
        }
        
        function updateDuration() {
            currentDuration = parseInt(document.getElementById('duration-slider').value) * 1000;
            document.getElementById('duration-display').textContent = (currentDuration / 1000) + 's';
            updatePlaybackInfo();
            
            // Update chart sonification settings
            if (chart) {
                chart.update({
                    sonification: {
                        duration: currentDuration
                    }
                }, false);
            }
            
            // If playing, restart with new duration
            if (isPlaying) {
                stopChart();
                setTimeout(playChart, 100);
            }
        }
        
        function updateVolume() {
            currentVolume = parseFloat(document.getElementById('volume-slider').value);
            document.getElementById('volume-display').textContent = Math.round(currentVolume * 100) + '%';
            
            // Update master volume
            if (chart) {
                chart.update({
                    sonification: {
                        masterVolume: currentVolume
                    }
                }, false);
            }
        }
        
        // Create chart with loaded data
        function createChart() {
            const zones = createTemperatureZones();
            
            // Extract data for visualization
            const temperatureData = combinedData.map(point => [point.x, point.y]);
            const crimeData = combinedData.map(point => [point.x, point.crime]);
            
            // Build crime sonification tracks
            const crimeTracks = [];
            
            if (crimeMode !== 'temp-only') {
                // Calculate crime thresholds
                const crimeRange = maxCrime - minCrime;
                const crime25 = minCrime + crimeRange * 0.25;
                const crime50 = minCrime + crimeRange * 0.5;
                const crime75 = minCrime + crimeRange * 0.75;
                
                // Multi-track approach with activeWhen conditions
                crimeTracks.push(
                    {
                        // Track for low crime (0-25%)
                        instrument: 'plucked',
                        mapping: {
                            time: 'x',
                            pitch: 'g4',  // Single note
                            volume: 0.4,
                            pan: 0.7,
                            noteDuration: 200,
                            tremolo: {
                                depth: 0,  // No tremolo for clarity
                                speed: 0
                            }
                        },
                        activeWhen: {
                            prop: 'crime',
                            max: crime25
                        }
                    },
                    {
                        // Track for medium-low crime (25-50%)
                        instrument: 'plucked',
                        mapping: {
                            time: 'x',
                            pitch: ['c5', 'e5'],  // Two-note interval
                            gapBetweenNotes: 150,
                            volume: 0.5,
                            pan: 0.7,
                            noteDuration: 150,
                            tremolo: {
                                depth: 0.1,  // Minimal tremolo
                                speed: 0.5
                            }
                        },
                        activeWhen: {
                            prop: 'crime',
                            min: crime25,
                            max: crime50
                        }
                    },
                    {
                        // Track for medium-high crime (50-75%)
                        instrument: 'plucked',
                        mapping: {
                            time: 'x',
                            pitch: ['g5', 'b5', 'd6'],  // Three-note chord
                            gapBetweenNotes: 175,
                            volume: 0.7,
                            pan: 0.7,
                            noteDuration: 150,
                            tremolo: {
                                depth: 0.4,  // Moderate tremolo
                                speed: 0.7
                            }
                        },
                        activeWhen: {
                            prop: 'crime',
                            min: crime50,
                            max: crime75
                        }
                    },
                    {
                        // Track for high crime (75-100%)
                        instrument: 'plucked',
                        mapping: {
                            time: 'x',
                            pitch: ['g5', 'c6', 'eb6', 'g6'],  // Four-note chord
                            gapBetweenNotes: 200,
                            volume: 0.9,
                            pan: 0.7,
                            noteDuration: 150,
                            tremolo: {
                                depth: 0.7,  // Maximum tremolo
                                speed: 0.9
                            }
                        },
                        activeWhen: {
                            prop: 'crime',
                            min: crime75
                        }
                    }
                );
            }
            
            // Build global tracks for temperature (conditionally)
            const globalTracks = crimeMode !== 'crime-only' ? [{
                instrument: 'basic1',
                mapping: {
                    time: 'x',  // Still tied to x-axis like crime
                    pitch: {
                        mapTo: 'y',
                        min: 'c2',
                        max: 'c4',
                        mapFunction: 'logarithmic'
                    },
                    noteDuration: function(context) {
                        // Calculate note duration based on time to next point
                        const msPerPoint = currentDuration / combinedData.length;
                        return Math.round(msPerPoint * 4); // 400% overlap
                    },
                    volume: 0.2,
                    pan: -0.7  // Left speaker
                }
            }] : [];
            
            chart = Highcharts.chart('chartContainer', {
                chart: {
                    type: 'line',
                    zoomType: 'x',
                    animation: false
                },
                title: {
                    text: 'Denver Temperature and Crime Correlation',
                    style: {
                        color: '#000000' // Keep chart title black (inside white container)
                    }
                },
                subtitle: {
                    text: null  // Clean subtitle
                },
                legend: {
                    enabled: false  // Remove the redundant legend
                },
                xAxis: {
                    type: 'datetime',
                    title: {
                        text: 'Date'
                    }
                },
                yAxis: [{
                    id: 'temp-axis',
                    title: {
                        text: 'Daily Maximum Temperature (°F)',
                        style: {
                            color: '#FF6B35'
                        }
                    },
                    labels: {
                        format: '{value}°F',
                        style: {
                            color: '#FF6B35'
                        }
                    }
                }, {
                    id: 'crime-axis',
                    title: {
                        text: 'Daily Violent Crime Count',
                        style: {
                            color: '#666'
                        }
                    },
                    labels: {
                        style: {
                            color: '#666'
                        }
                    },
                    opposite: true
                }],
                plotOptions: {
                    series: {
                        animation: false,
                        marker: {
                            enabled: false
                        },
                        states: {
                            hover: {
                                lineWidthPlus: 0
                            }
                        }
                    },
                    column: {
                        pointPadding: 0,
                        groupPadding: 0,
                        borderWidth: 0
                    }
                },
                tooltip: {
                    shared: true,
                    crosshairs: true
                },
                sonification: {
                    duration: currentDuration,
                    order: 'simultaneous',
                    masterVolume: currentVolume,
                    showTooltip: true,
                    showCrosshair: true,
                    // Global track for temperature
                    globalTracks: globalTracks,
                    events: {
                        onPlay: function() {
                            showStatus('Playing sonification...');
                        },
                        onStop: function() {
                            showStatus('Sonification stopped');
                        }
                    }
                },
                series: [{
                    name: 'Daily Maximum Temperature',
                    type: 'line',
                    data: combinedData,
                    yAxis: 0,
                    lineWidth: 4,
                    zones: zones,
                    zoneAxis: 'y',
                    tooltip: {
                        valueSuffix: '°F',
                        pointFormat: '<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}°F</b><br/>'
                    },
                    sonification: {
                        tracks: crimeTracks  // Only crime tracks here
                    }
                }, {
                    name: 'Violent Crime Count',
                    type: 'column',
                    data: crimeData,
                    yAxis: 1,
                    color: 'rgba(100, 100, 100, 0.4)',
                    tooltip: {
                        valueSuffix: ' crimes'
                    },
                    enableMouseTracking: true,
                    sonification: {
                        enabled: false // Disable sonification for visual crime series
                    }
                }]
            });
        }
        
        // Show status message
        function showStatus(message, isError = false) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = isError ? 'status error' : 'status';
            status.style.display = 'block';
            
            if (!isError) {
                setTimeout(() => {
                    status.style.display = 'none';
                }, 3000);
            }
        }
        
        // Auto-load embedded data on page load
        window.addEventListener('DOMContentLoaded', function() {
            // Parse the embedded CSV data
            parseCSV(embeddedCSV);
        });
    </script>
</body>
</html>
